<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Chromeâ€‘like Browser â€” Demo UI</title>
  <style>
    :root{--bg:#0b1220;--panel:#0f1724;--muted:#9aa4b2;--accent:#06b6d4;--glass:rgba(255,255,255,0.03)}
    html,body{height:100%;margin:0;font-family:Inter,Segoe UI,system-ui,Roboto,-apple-system; background:linear-gradient(180deg,#071025 0%, #071826 100%);color:#e6eef6}
    .browser{display:flex;flex-direction:column;height:100vh;border-radius:8px;overflow:hidden}/* Top toolbar */
.toolbar{display:flex;align-items:center;gap:8px;padding:8px 12px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-bottom:1px solid rgba(255,255,255,0.03)}
.nav{display:flex;gap:6px}
.btn{background:var(--glass);border:1px solid rgba(255,255,255,0.03);padding:8px 10px;border-radius:6px;color:var(--muted);cursor:pointer;min-width:36px;text-align:center}
.urlbar{flex:1;display:flex;align-items:center;gap:8px;padding:6px 8px;border-radius:8px;background:#071026;border:1px solid rgba(255,255,255,0.02)}
.urlbar input{flex:1;background:transparent;border:0;color:inherit;font-size:14px;outline:none}
.tabs{display:flex;gap:6px;padding:8px;background:transparent;border-bottom:1px solid rgba(255,255,255,0.02)}
.tab{padding:8px 12px;border-radius:8px;background:rgba(255,255,255,0.01);cursor:pointer}
.tab.active{background:linear-gradient(90deg,#0b1220,#0e1a2a);box-shadow:0 6px 18px rgba(2,6,23,0.6)}

/* content area */
.content{display:flex;flex:1;overflow:hidden}
.viewport{flex:1;border-right:1px solid rgba(255,255,255,0.02);background:#fff}
iframe{width:100%;height:100%;border:0}

/* devtools */
.devtools{width:420px;background:#071224;color:#e6eef6;display:flex;flex-direction:column}
.dev-header{display:flex;align-items:center;justify-content:space-between;padding:10px;border-bottom:1px solid rgba(255,255,255,0.02)}
.dev-body{padding:8px;overflow:auto;flex:1;font-family:monospace;font-size:13px}
.small{font-size:12px;color:var(--muted)}

/* responsive */
@media(max-width:980px){ .devtools{display:none} }

  </style>
</head>
<body>
  <div class="browser" id="browser">
    <div class="toolbar">
      <div class="nav">
        <button class="btn" id="back">â—€</button>
        <button class="btn" id="forward">â–¶</button>
        <button class="btn" id="reload">âŸ³</button>
      </div>
      <div class="urlbar">
        <span id="secure" class="small">ðŸ”’</span>
        <input id="address" placeholder="Enter URL or about:blank â€” example: https://example.com" value="about:blank" />
        <button class="btn" id="go">Go</button>
      </div>
      <div style="display:flex;gap:8px;margin-left:8px">
        <button class="btn" id="toggleInspect">Inspect</button>
        <button class="btn" id="newTab">ï¼‹</button>
      </div>
    </div><div class="tabs" id="tabs"></div>

<div class="content">
  <div class="viewport" id="viewport">
    <!-- iframe for pages -->
  </div>

  <div class="devtools" id="devtools">
    <div class="dev-header">
      <div>
        <strong>DevTools (basic)</strong>
        <div class="small">DOM / Inspector</div>
      </div>
      <div class="small" id="devUrl">â€”</div>
    </div>
    <div class="dev-body" id="domView">Click "Inspect" and then click an element inside the page (works best with proxied or same-origin pages).</div>
  </div>
</div>

  </div>  <script>
    // Simple Chrome-like demo â€” single-file
    const tabsEl = document.getElementById('tabs');
    const viewport = document.getElementById('viewport');
    const address = document.getElementById('address');
    const goBtn = document.getElementById('go');
    const backBtn = document.getElementById('back');
    const forwardBtn = document.getElementById('forward');
    const reloadBtn = document.getElementById('reload');
    const newTabBtn = document.getElementById('newTab');
    const toggleInspectBtn = document.getElementById('toggleInspect');
    const domView = document.getElementById('domView');
    const devUrl = document.getElementById('devUrl');

    let tabs = [];
    let activeId = null;

    function createTab(url='about:blank'){
      const id = 'tab-'+Date.now();
      const tab = {id, title: url.replace(/^https?:\/\//,'').slice(0,20), url, history:[url], historyIndex:0};
      tabs.push(tab);
      renderTabs();
      activateTab(id);
    }

    function renderTabs(){
      tabsEl.innerHTML='';
      tabs.forEach(t=>{
        const el = document.createElement('div'); el.className='tab'+(t.id===activeId? ' active':''); el.textContent = t.title; el.onclick = ()=>activateTab(t.id);
        tabsEl.appendChild(el);
      });
    }

    function activateTab(id){
      activeId = id;
      const tab = tabs.find(t=>t.id===id);
      address.value = tab.url;
      renderTabs();
      loadInViewport(tab.url, tab);
    }

    function loadInViewport(url, tab){
      viewport.innerHTML = '';
      devUrl.textContent = url;
      // create iframe
      const iframe = document.createElement('iframe');
      iframe.setAttribute('sandbox','allow-scripts allow-forms allow-same-origin');
      iframe.src = 'about:blank';
      iframe.style.background = '#fff';
      viewport.appendChild(iframe);

      // attach to tab for navigation
      tab._iframe = iframe;

      // Try to load via fetch to circumvent some headers if you have a proxy at /fetch
      if(url.startsWith('about:') || url.trim()===''){
        iframe.src = 'about:blank';
        return;
      }

      // If you have a server proxy endpoint /fetch?url=... (see earlier instructions), we prefer that.
      const proxyUrl = '/fetch?url=' + encodeURIComponent(url);
      // attempt to fetch via proxy; if fails, fallback to direct iframe.src
      fetch(proxyUrl, {method:'GET'}).then(r=>{
        if(r.ok){ return r.text(); }
        throw new Error('proxy error');
      }).then(html=>{
        // set as srcdoc so we control inspector script availability
        iframe.srcdoc = html;
        setupIframeMessaging(iframe, url);
      }).catch(err=>{
        // fallback: try direct load (may be blocked by X-Frame-Options)
        try{ iframe.src = url; setupIframeMessaging(iframe, url); }catch(e){ iframe.src = 'about:blank'; domView.textContent = 'Unable to load page: ' + e; }
      });
    }

    function setupIframeMessaging(iframe, url){
      // basic handshake for inspector messages
      window.addEventListener('message', function handler(ev){
        const d = ev.data || {};
        if(d.type === 'inspect-click'){
          domView.textContent = 'Selector: ' + d.selector + '\n\n' + d.outer;
        }
        if(d.type === 'replace-done'){
          domView.textContent = 'Replace result: ' + (d.success? 'success':'failed');
          // optionally refresh iframe content
        }
      }, false);

      // enable inspect toggle action will postMessage to iframe; iframe must have injected script (via proxy) to listen
    }

    goBtn.addEventListener('click', ()=>{
      const url = address.value.trim();
      if(!url) return;
      const full = url.match(/^https?:\/\//)? url : 'https://'+url;
      const tab = tabs.find(t=>t.id===activeId);
      if(tab){ tab.url = full; tab.history = tab.history.slice(0, tab.historyIndex+1); tab.history.push(full); tab.historyIndex = tab.history.length-1; tab.title = full.replace(/^https?:\/\//,'').slice(0,20); }
      activateTab(activeId);
    });

    newTabBtn.addEventListener('click', ()=>createTab('about:blank'));

    backBtn.addEventListener('click', ()=>{
      const tab = tabs.find(t=>t.id===activeId);
      if(!tab) return;
      if(tab.historyIndex>0){ tab.historyIndex--; tab.url = tab.history[tab.historyIndex]; activateTab(tab.id); }
    });
    forwardBtn.addEventListener('click', ()=>{
      const tab = tabs.find(t=>t.id===activeId);
      if(!tab) return;
      if(tab.historyIndex < tab.history.length-1){ tab.historyIndex++; tab.url = tab.history[tab.historyIndex]; activateTab(tab.id); }
    });
    reloadBtn.addEventListener('click', ()=>{
      const tab = tabs.find(t=>t.id===activeId);
      if(tab && tab._iframe){
        const iframe = tab._iframe; // reload iframe source
        if(iframe.srcdoc) iframe.srcdoc = iframe.srcdoc; else iframe.contentWindow.location.reload();
      }
    });

    // Inspect toggle
    let inspectOn = false;
    toggleInspectBtn.addEventListener('click', ()=>{
      inspectOn = !inspectOn;
      toggleInspectBtn.style.opacity = inspectOn ? '1' : '0.8';
      const tab = tabs.find(t=>t.id===activeId);
      if(tab && tab._iframe){
        try{ tab._iframe.contentWindow.postMessage({type:'toggle-inspect', on:inspectOn}, '*'); }
        catch(e){ domView.textContent = 'Inspect unavailable on cross-origin frames. Use proxy /fetch to enable full inspect features.'; }
      }
    });

    // initial
    createTab('about:blank');
    // helpful hint: if you have the proxy server running from earlier instructions, this UI will try to use /fetch to enable inspection and DOM editing.
  </script></body>
</html>